<!-- Loading starts -->
<!-- <div id="loading-wrapper" *ngIf="isLodaing">
  <ngx-spinner bdColor="rgba(0,0,0,0.9)" type="ball-clip-rotate"></ngx-spinner>
</div> -->

<!-- Loading ends -->
<div class="content-wrapper">
  <div class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1 class="m-0">Bus Routes</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item active"><button (click)="openNewRouteDialog()"
              class="btn btn-default"
              data-toggle="modal"
              data-target="#formModal"
            >
            <i class="fas fa-plus"></i> New Route
            </button></li>
          </ol>
        </div>
      </div>
    </div>
  </div>


  <section class="content card p-2">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12 col-12">
          <div>
            

            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Serial No.</th>
                  <th>Route Name</th>
                  <th>Route No.</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let data of busRoutesList; let i = index">
                  <td>{{ i+1 }}</td>
                  <td>{{ data.routeName }}</td>
                  <td>{{ data.routeNo }}</td>
                  <td>
                    <button (click)="openEditDialog(data)"
                      class="btn btn-default" data-toggle="modal"
                      data-target="#formModal"
                    >
                    <i class="fas fa-edit"></i>
                    </button>
                    <button (click)="openConfirmationDialog(data)"
                      class="btn btn-default" data-toggle="modal"
                      data-target="#deleteModal"
                    >
                    <i class="fas fa-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>

            
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="modal fade" id="formModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Route Details</h2>
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
        </div>
        <div class="modal-body">
            <div class="form-group">
              <div class="row">
                <div class="col-md-6 pt-3">
                  <label>Route Name</label>
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="busRoutes.routeName"
                  />
                </div>
                <div class="col-md-6 pt-3">
                  <label>Route No</label>
                  <input
                    type="text"
                    class="form-control"
                    [(ngModel)]="busRoutes.routeNo"
                  />
                </div>
              </div>
            </div>

            <button *ngIf="!isEdit"
              type="button"
              class="btn btn-primary float-sm-right"
              (click)="handleSaveRoutes()"
              data-dismiss="modal"
            >
              Save
            </button>
            <button *ngIf="isEdit"
              type="button"
              class="btn btn-primary float-sm-right"
              (click)="handleUpdateRoutes()"
              data-dismiss="modal"
            >
              Update
            </button>
            <button
              type="button"
              class="btn btn-default float-sm-right"
              data-dismiss="modal"
            >
              Cancel
            </button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title">Confirmation Message</h2>
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
        </div>
        <div class="modal-body">
            <h4>Are you sure ! You want to delete route <strong><i>"{{toBeDeletedRecord.routeName}}"</i></strong> ?</h4>
            <button
              type="button"
              class="btn btn-primary float-sm-right"
              (click)="handleDeleteRoutes()"
              data-dismiss="modal"
            >
              Yes
            </button>
            <button
              type="button"
              class="btn btn-default float-sm-right"
              data-dismiss="modal"
            >
              No
            </button>
        </div>
      </div>
    </div>
  </div>
</div>
